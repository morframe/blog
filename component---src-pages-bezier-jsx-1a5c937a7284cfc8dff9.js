"use strict";(self.webpackChunkmy_learning_site=self.webpackChunkmy_learning_site||[]).push([[433],{7461:function(t,i,e){e.r(i),e.d(i,{Head:function(){return d},default:function(){return f}});var n=e(7294);let s=function(){function t(t,i){this.x=t||0,this.y=i||0}var i=t.prototype;return i.isIntersect=function(t,i){return void 0===i&&(i=1e-11),this.minus(t).squareLength()<i*i},i.add=function(i){return new t(this.x+i.x,this.y+i.y)},i.minus=function(i){return new t(this.x-i.x,this.y-i.y)},i.multiply=function(i){return new t(this.x*i.x,this.y*i.y)},i.multiplyScalar=function(i){return this.multiply(new t(i,i))},i.div=function(i){return new t(this.x/i.x,this.y/i.y)},i.divScalar=function(i){return this.div(new t(i,i))},i.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},i.squareLength=function(){return this.x*this.x+this.y*this.y},i.distanceTo=function(t){return this.minus(t).length()},i.copyFrom=function(t){return this.x=t.x,this.y=t.y,this},i.setZero=function(){return this.x=this.y=0,this},i.clone=function(){return new t(this.x,this.y)},i.isZero=function(){return 0==this.x&&0==this.y},t}();var o=e(4578);let h=function(){this.status=0},r=function(){function t(t,i,e){this.x=t||0,this.y=i||0,this.z=e||0}var i=t.prototype;return i.isIntersect=function(t,i){return void 0===i&&(i=1e-11),this.minus(t).squareLength()<i*i},i.add=function(i){return new t(this.x+i.x,this.y+i.y,this.z+i.z)},i.minus=function(i){return new t(this.x-i.x,this.y-i.y,this.z-i.z)},i.multiply=function(i){return new t(this.x*i.x,this.y*i.y,this.z*i.z)},i.div=function(i){return new t(this.x/i.x,this.y/i.y,this.z/i.z)},i.divScalar=function(i){return this.div(new t(i,i,i))},i.multiplyScalar=function(i){return this.multiply(new t(i,i,i))},i.length=function(){return Math.sqrt(this.squareLength())},i.squareLength=function(){return this.x*this.x+this.y*this.y+this.z*this.z},i.distanceTo=function(t){return this.minus(t).length()},i.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},i.setZero=function(){return this.x=this.y=this.z=0,this},i.clone=function(){return new t(this.x,this.y)},i.isZero=function(){return 0==this.x&&0==this.y&&0==this.z},i.homogeneousNormalize=function(){return 1!=this.z&&0!=this.z?(new t).copyFrom(this).divScalar(this.z):this},t}();function a(t,i){let e=[1];const n=1-i;for(let s=1;s<=t;s++){let t=0;for(let o=0;o<s;o++){let s=e[o];e[o]=t+n*s,t=i*s}e[s]=t}return e}let u=function(t){function i(i){var e;return(e=t.call(this)||this).controlPoints=i||[],e.n=e.controlPoints.length-1,e.rational=!1,e}(0,o.Z)(i,t);var e=i.prototype;return e.addControlPoint=function(t){this.controlPoints.push(t),this.n=this.controlPoints.length-1},e.getPoint=function(t){let i,e=a(this.n,t);i=this.rational?new r(0,0,0):new s(0,0);for(let n=0;n<=this.n;n++)i=this.rational?i.add(this.controlPoints[n].homogeneousPosition().multiplyScalar(e[n])):i.add(this.controlPoints[n].position.multiplyScalar(e[n]));return this.rational?i.homogeneousNormalize():i},e.clear=function(){this.controlPoints=[],this.n=this.controlPoints.length-1},e.draw=function(t){const i=t.getContext();i.save(),i.beginPath(),i.strokeStyle="#8B008B";let e=this.getPoint(0);i.moveTo(t.toScreenX(e.x),t.toScreenY(e.y));for(let n=0;n<1;n+=.01)e=this.getPoint(n),i.lineTo(t.toScreenX(e.x),t.toScreenY(e.y));i.stroke(),i.beginPath(),i.strokeStyle="#B8860B",e=this.controlPoints[0].position,i.moveTo(t.toScreenX(e.x),t.toScreenY(e.y));for(let n=1;n<this.controlPoints.length;n++)e=this.controlPoints[n].position,i.lineTo(t.toScreenX(e.x),t.toScreenY(e.y));i.stroke(),i.restore()},i}(h),l=function(t){function i(i,e,n){var o;return void 0===n&&(n=0),(o=t.call(this)||this).position=new s(i||0,e||0),o.w=n,o.radius=10,o.index=-1,o.homogeneous=!0,o}(0,o.Z)(i,t);var e=i.prototype;return e.homogeneousPosition=function(){return new r(this.position.x*this.w,this.position.y*this.w,this.w)},e.isIntersect=function(t,i,e){return void 0===e&&(e=1e-10),this.position.distanceTo(new s(t,i))<=e},e.move=function(t){return t.isZero()||(this.position.x+=t.x,this.position.y+=t.y),this},e.draw=function(t){const i=t.getContext();i.save(),0==this.status?i.strokeStyle="black":1==this.status?i.strokeStyle="orange":2==this.status&&(i.strokeStyle="blue"),this.drawNormal(t,i),i.restore()},e.drawNormal=function(t,i){const e=t.toScreenX(this.position.x),n=t.toScreenY(this.position.y);i.beginPath(),i.arc(e,n,this.radius,0,2*Math.PI,!0),i.fillStyle="white",i.stroke(),i.fill(),i.fillStyle="black",i.fillText(this.index.toString(),e-this.radius/2,n+this.radius/3),this.homogeneous&&i.fillText("w"+this.index+" = "+this.w.toString(),e-this.radius/2,n-this.radius-10)},i}(h),c=function(){function t(t){this._id=0,this.points=[],this.curve=new u,this.canvas=t||document.createElement("canvas"),this.tip=document.createElement("span"),this.tip.innerText=(new Date).toString(),this.tip.style.setProperty("display","none"),this.tip.style.setProperty("boxShadow ","0px 0px 2px 1px rgba(0,0,0,0.4)"),this.tip.style.setProperty("padding","0px 5px"),this.tip.style.setProperty("position","fixed"),document.body.appendChild(this.tip),document.addEventListener("mousemove",(t=>{t.toElement!=this.canvas?this.tip.style.setProperty("display","none"):(this.tip.style.setProperty("top",t.clientY+10+"px"),this.tip.style.setProperty("left",t.clientX+10+"px"))})),this.selectItem=null,this.highlightItem=null,this.mouseDown=!1,this.mouseStartX=0,this.mouseStartY=0,this.zoom=1,this.offsetX=0,this.offsetY=0,this.panStart=new s,this.panOffset=new s,this.width=this.canvas.width,this.height=this.canvas.height,this.snapConfig={radius:3},this.snappedPoint=new s,this.snapResult=!1,this.canvas.addEventListener("pointerdown",this.onPointerDown.bind(this)),this.canvas.addEventListener("pointerup",this.onPointerUp.bind(this)),this.canvas.addEventListener("pointermove",this.onPointerMove.bind(this)),this.canvas.addEventListener("wheel",this.onWheel.bind(this))}var i=t.prototype;return i.updateCurve=function(){this.needUpdate&&(this.curve.clear(),this.points.forEach((t=>{this.curve.addControlPoint(t)})),this.needUpdate=!1)},i.createPoint=function(t,i,e){void 0===t&&(t=0),void 0===i&&(i=0),void 0===e&&(e=1);let n=new l(t,i,e);return n.index=this.points.length,n.homogeneous=this.curve.rational,this.points.push(n),this.needUpdate=!0,n},i.initCurve=function(){this.createPoint(-150,10),this.createPoint(-80,100),this.createPoint(160,50),this.createPoint(200,10)},i.initCurveRational=function(){this.createPoint(-150,10),this.createPoint(-80,100,.5),this.createPoint(160,50,.2),this.createPoint(200,10)},i.resize=function(t,i){this.canvas.width=t,this.canvas.height=i,this.width=this.canvas.width,this.height=this.canvas.height,this.draw()},i.toWorldLength=function(t){return this.toWorldPosition(0,t).minus(this.toWorldPosition(0,0)).length()},i.snapPoint=function(t,i){void 0===i&&(i=new s);for(let s of this.points)if((!this.drag||s!=this.selectItem)&&s.isIntersect(t.x,t.y,this.toWorldLength(s.radius)))return i.copyFrom(s.position),!0;const e=this.toWorldLength(5),n=this.toWorldPosition(this.width,this.height),o=this.toWorldPosition(0,0);let h=this.getTickLength((o.y-n.y)/5)/5,r=Math.round(t.x/h),a=Math.round(t.y/h),u=new s(r*h,a*h);return!!u.isIntersect(t,e)&&(i.copyFrom(u),!0)},i.onPointerMove=function(t){const i=this.toWorldPosition(t.offsetX,t.offsetY);if(this.snapPoint(i,this.snappedPoint)?(this.snapResult=!0,i.copyFrom(this.snappedPoint),this.tip.innerText=i.x.toFixed(2)+", "+i.y.toFixed(2),this.tip.style.setProperty("display","inline")):(this.tip.style.setProperty("display","none"),this.snapResult=!1),this.drag){if(this.selectItem){const t=i.x,e=i.y,n=new s(t,e).minus(this._dragStart);n.length()>this.toWorldLength(10)&&(this.selectItem.position.copyFrom(this.pos),this.selectItem.move(n))}}else if(this.mouseDown){let i=new s(t.offsetX,t.offsetY).minus(this.panStart);this.offsetX=this.panOffset.x-i.x,this.offsetY=this.panOffset.y+i.y}else{this.highlightItem&&(this.highlightItem.status=this.selectItem==this.highlightItem?2:0,this.highlightItem=null);const i=this.toWorldX(t.offsetX),e=this.toWorldY(t.offsetY);for(let t of this.points)if(t.isIntersect(i,e,this.toWorldLength(t.radius))){this.highlightItem=t,this.highlightItem.status=1;break}}this.draw()},i.onPointerUp=function(t){this.drag=!1,this.mouseDown=!1,this.panStart=new s(t.offsetX,t.offsetY),this.panOffset=new s},i.onPointerDown=function(t){if(this.mouseDown=!0,this.mouseStartX=t.offsetX,this.mouseStartY=t.offsetY,this.panStart=new s(t.offsetX,t.offsetY),this.panOffset=new s(this.offsetX,this.offsetY),this.selectItem&&(this.selectItem.status=0,this.selectItem=null),this.highlightItem){const i=this.toWorldPosition(t.offsetX,t.offsetY);this.snapResult&&i.copyFrom(this.snappedPoint),this.selectItem=this.highlightItem,this.selectItem.status=2,this.drag=!0,this._dragStart=i,this.pos=this.selectItem.position.clone()}},i.onWheel=function(t){t.preventDefault();const i=this.getZoomScale(t.deltaY);t.deltaY>0?this.zoom*=i:t.deltaY<0&&(this.zoom/=i),this.draw()},i.getZoomScale=function(t){const i=Math.abs(.01*t);return Math.pow(.95,i)},i.toScreenX=function(t){const i=t*this.zoom-this.offsetX;return this.width/2+i},i.toScreenY=function(t){const i=t*this.zoom-this.offsetY;return this.height/2-i},i.toWorldPosition=function(t,i,e){return void 0===e&&(e=0),new s((t-this.width/2+this.offsetX)/this.zoom,(this.height/2+this.offsetY-i)/this.zoom,e)},i.toWorldX=function(t){return this.toWorldPosition(t,0).x},i.toWorldY=function(t){return this.toWorldPosition(0,t).y},i.getContext=function(){return this.canvas.getContext("2d")},i.draw=function(){this.updateCurve();const t=this.getContext();t.save(),t.clearRect(0,0,this.width,this.height),this.drawGrid(t),this.curve.draw(this),this.points.forEach((t=>t.draw(this))),t.strokeRect(0,0,this.width,this.height),t.restore()},i.getTickLength=function(t){let i=1;if(t>1){for(;t/10>1;)t/=10,i*=10;return t<2?1*i:t<5?2*i:5*i}},i.drawAxis=function(t,i,e){t.moveTo(this.toScreenX(e.x),this.toScreenY(e.y)),t.lineTo(this.toScreenX(i.x),this.toScreenY(i.y)),t.stroke()},i.drawLabel=function(t,i,e){t.fillText(e,this.toScreenX(i.x),this.toScreenY(i.y))},i.drawGrid=function(t){t.save();const i=this.toWorldPosition(this.width,this.height),e=this.toWorldPosition(0,0);let n=[],o=[0],h=[],r=[],a=20/this.zoom;a=this.getTickLength((e.y-i.y)/5),a<0&&(a=0);let u=a/5,l=Math.max(Math.abs(e.y),Math.abs(i.y)),c=l/u;for(let f=1;f<c;f++){if(f%5==0)continue;let t=u*f;t<e.y&&r.push(new s(e.x,t),new s(i.x,t)),-t>i.y&&r.push(new s(e.x,-t),new s(i.x,-t))}c=l/a;for(let f=1;f<c;f++){let t=a*f;t<e.y&&(o.push(t),n.push(new s(e.x,t),new s(i.x,t))),-t>i.y&&(o.push(-t),n.push(new s(e.x,-t),new s(i.x,-t)))}l=Math.max(Math.abs(e.x),Math.abs(i.x)),c=l/u;for(let f=1;f<c;f++){if(f%5==0)continue;let t=u*f;t<i.x&&r.push(new s(t,i.y),new s(t,e.y)),-t>e.x&&r.push(new s(-t,i.y),new s(-t,e.y))}c=l/u;for(let f=1;f<c;f++){let t=a*f;t<i.x&&(n.push(new s(t,i.y),new s(t,e.y)),h.push(t)),-t>e.x&&(n.push(new s(-t,i.y),new s(-t,e.y)),h.push(-t))}t.beginPath(),t.strokeStyle="rgb(232,232,232)";for(let s=0;s<r.length;s+=2)this.drawAxis(t,r[s],r[s+1]);t.stroke(),t.beginPath(),t.strokeStyle="rgb(192,192,192)";for(let s=0;s<n.length;s+=2)this.drawAxis(t,n[s],n[s+1]);t.stroke(),t.beginPath(),t.strokeStyle="red",this.drawAxis(t,new s(e.x,0),new s(i.x,0)),t.stroke(),t.beginPath(),t.strokeStyle="green",this.drawAxis(t,new s(0,i.y),new s(0,e.y)),t.stroke(),o.forEach((i=>this.drawLabel(t,new s(0,i),i))),h.forEach((i=>this.drawLabel(t,new s(i,0),i))),t.restore()},t}();var f=t=>{const i=function(t){var i,e,n,s,o,h=t.substring(1).split("&"),r={};for(i=0;i<h.length;i++)-1===(e=h[i]).indexOf("=")?r[decodeURIComponent(e).trim()]=!0:(n=e.split("="),s=decodeURIComponent(n[0]).trim(),o=decodeURIComponent(n[1]).trim(),r[s]=o);return r}(t.location.search),e=n.useRef(),[s,o]=n.useState();return n.useEffect((()=>{e&&e.current&&(e.current.hasChildNodes()||(t=>{let n=new c;i.rational?(n.curve.rational=!0,n.initCurveRational()):n.initCurve(),n.resize(e.current.clientWidth,e.current.clientHeight),t.appendChild(n.canvas),n.draw(),o(n),window.addEventListener("resize",(t=>{const i=e.current.clientWidth,s=e.current.clientHeight;n.resize(i,s)}))})(e.current))}),[e]),n.createElement("div",null,n.createElement("div",null,n.createElement("h1",null," bezier curve "),n.createElement("button",{onClick:()=>{s.createPoint()}},"add point")),n.createElement("div",{id:"canvasContainer",ref:e,style:{height:"80vh"}}))};const d=()=>n.createElement("title",null,"Bezier Page")}}]);