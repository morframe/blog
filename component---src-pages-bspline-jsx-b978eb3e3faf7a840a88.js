"use strict";(self.webpackChunkmy_learning_site=self.webpackChunkmy_learning_site||[]).push([[982],{8137:function(t,e,i){i.r(e),i.d(e,{Head:function(){return f},default:function(){return u}});var n=i(7294),o=i(6716),s=i(3144),r=i(4578),h=i(3402),c=i(17);function a(t,e,i,n,o){const s=function(t,e,i){const n=i.length-1;if(e==i[n]){for(let t=n-1;t>=0;t--)if(i[t]!=e)return t;return n-1}let o=0,s=n-1,r=Math.floor((o+s)/2);for(;e<i[r]||e>=i[r+1];)e<i[r]?s=r:o=r,r=Math.floor((o+s)/2);return r}(0,o,i),r=function(t,e,i,n){n.length;let o=[],s=[],r=[];o[0]=1;for(let h=1;h<=i;h++){s[h]=e-(t+1-h>=0?n[t+1-h]:0),r[h]=(t+h<n.length?n[t+h]:0)-e;let i=0;for(let t=0;t<h;t++){let e=o[t]/(r[t+1]+s[h-t]);o[t]=i+r[t+1]*e,i=s[h-t]*e}o[h]=i}return o}(s,o,e,i);let h=new c.F;for(let c=0;c<=e;c++){const t=s-e+c;t<0||(t>=n.length||(h=h.add(n[t].multiplyScalar(r[c]))))}return h}let l=function(t){function e(){var e;return(e=t.call(this)||this).controlPoints=[],e.knotVector=[],e.degree=3,e.rational=!1,e}(0,r.Z)(e,t);var i=e.prototype;return i.setKnotVector=function(t){this.knotVector=t},i.addControlPoint=function(t){this.controlPoints.push(t)},i.getPoint=function(t){this.knotVector.length;const e=this.degree,i=this.controlPoints.map((t=>t.position));return a(0,e,this.knotVector,i,t)},i.clear=function(){this.controlPoints=[]},i.draw=function(t){const e=t.getContext();e.save(),e.beginPath(),e.strokeStyle="#8B008B";let i=this.getPoint(0);e.moveTo(t.toScreenX(i.x),t.toScreenY(i.y));for(let n=0;n<1;n+=.01)i=this.getPoint(n),e.lineTo(t.toScreenX(i.x),t.toScreenY(i.y));e.stroke(),e.beginPath(),e.strokeStyle="#B8860B",i=this.controlPoints[0].position,e.moveTo(t.toScreenX(i.x),t.toScreenY(i.y));for(let n=1;n<this.controlPoints.length;n++)i=this.controlPoints[n].position,e.lineTo(t.toScreenX(i.x),t.toScreenY(i.y));e.stroke(),e.strokeStyle="#B8060B";this.knotVector.forEach(((i,n)=>{e.beginPath();const o=this.getPoint(i),s=t.toScreen(o.x,o.y);e.arc(s.x,s.y,5,0,2*Math.PI,!0),e.stroke()})),e.restore()},e}(h.c);var u=t=>{const e=(0,s.m)(t.location.search),i=n.useRef(),[r,h]=n.useState();return n.useEffect((()=>{i&&i.current&&(i.current.hasChildNodes()||(t=>{let n=new o.M;const s=new l;s.addControlPoint(n.createPoint(-180,80)),s.addControlPoint(n.createPoint(-140,160)),s.addControlPoint(n.createPoint(100,200)),s.addControlPoint(n.createPoint(240,160)),s.addControlPoint(n.createPoint(360,60)),s.addControlPoint(n.createPoint(200,-60)),s.addControlPoint(n.createPoint(60,-120)),s.addControlPoint(n.createPoint(-200,-60)),s.addControlPoint(n.createPoint(-250,60)),s.knotVector=[0,0,0,0,.1,.3,.5,.7,.8,1,1,1,1],n.curve=s,e.rational,n.resize(i.current.clientWidth,i.current.clientHeight),t.appendChild(n.canvas),n.draw(),h(n),window.addEventListener("resize",(t=>{const e=i.current.clientWidth,o=i.current.clientHeight;n.resize(e,o)}))})(i.current))}),[i]),n.createElement("div",null,n.createElement("div",null,n.createElement("h1",null," basic spline curve "),n.createElement("label",null,"knot vector:",n.createElement("input",{size:"100",type:"text",id:"knot",name:"knot",onChange:t=>{const e=t.target.value;try{var i=JSON.parse("["+e+"]");r&&r.curve&&(r.curve.setKnotVector(i),r.needsUpdate=!0,r.draw())}catch(n){}},defaultValue:r?r.curve.knotVector.toString():""}))),n.createElement("div",{id:"canvasContainer",ref:i,style:{height:"80vh"}}))};const f=()=>n.createElement("title",null,"Bspline Page")},6716:function(t,e,i){i.d(e,{M:function(){return l}});var n=i(17),o=i(4578),s=i(3402);let r=function(){function t(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0}var e=t.prototype;return e.isIntersect=function(t,e){return void 0===e&&(e=1e-11),this.minus(t).squareLength()<e*e},e.add=function(e){return new t(this.x+e.x,this.y+e.y,this.z+e.z)},e.minus=function(e){return new t(this.x-e.x,this.y-e.y,this.z-e.z)},e.multiply=function(e){return new t(this.x*e.x,this.y*e.y,this.z*e.z)},e.div=function(e){return new t(this.x/e.x,this.y/e.y,this.z/e.z)},e.divScalar=function(e){return this.div(new t(e,e,e))},e.multiplyScalar=function(e){return this.multiply(new t(e,e,e))},e.length=function(){return Math.sqrt(this.squareLength())},e.squareLength=function(){return this.x*this.x+this.y*this.y+this.z*this.z},e.distanceTo=function(t){return this.minus(t).length()},e.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},e.setZero=function(){return this.x=this.y=this.z=0,this},e.clone=function(){return new t(this.x,this.y)},e.isZero=function(){return 0==this.x&&0==this.y&&0==this.z},e.homogeneousNormalize=function(){return 1!=this.z&&0!=this.z?(new t).copyFrom(this).divScalar(this.z):this},t}();function h(t,e){let i=[1];const n=1-e;for(let o=1;o<=t;o++){let t=0;for(let s=0;s<o;s++){let o=i[s];i[s]=t+n*o,t=e*o}i[o]=t}return i}let c=function(t){function e(e){var i;return(i=t.call(this)||this).controlPoints=e||[],i.n=i.controlPoints.length-1,i.rational=!1,i}(0,o.Z)(e,t);var i=e.prototype;return i.addControlPoint=function(t){this.controlPoints.push(t),this.n=this.controlPoints.length-1},i.getPoint=function(t){let e,i=h(this.n,t);e=this.rational?new r(0,0,0):new n.F(0,0);for(let n=0;n<=this.n;n++)e=this.rational?e.add(this.controlPoints[n].homogeneousPosition().multiplyScalar(i[n])):e.add(this.controlPoints[n].position.multiplyScalar(i[n]));return this.rational?e.homogeneousNormalize():e},i.clear=function(){this.controlPoints=[],this.n=this.controlPoints.length-1},i.draw=function(t){const e=t.getContext();e.save(),e.beginPath(),e.strokeStyle="#8B008B";let i=this.getPoint(0);e.moveTo(t.toScreenX(i.x),t.toScreenY(i.y));for(let n=0;n<1;n+=.01)i=this.getPoint(n),e.lineTo(t.toScreenX(i.x),t.toScreenY(i.y));e.stroke(),e.beginPath(),e.strokeStyle="#B8860B",i=this.controlPoints[0].position,e.moveTo(t.toScreenX(i.x),t.toScreenY(i.y));for(let n=1;n<this.controlPoints.length;n++)i=this.controlPoints[n].position,e.lineTo(t.toScreenX(i.x),t.toScreenY(i.y));e.stroke(),e.restore()},e}(s.c),a=function(t){function e(e,i,o){var s;return void 0===o&&(o=0),(s=t.call(this)||this).position=new n.F(e||0,i||0),s.w=o,s.radius=10,s.index=-1,s.homogeneous=!0,s}(0,o.Z)(e,t);var i=e.prototype;return i.homogeneousPosition=function(){return new r(this.position.x*this.w,this.position.y*this.w,this.w)},i.isIntersect=function(t,e,i){return void 0===i&&(i=1e-10),this.position.distanceTo(new n.F(t,e))<=i},i.move=function(t){return t.isZero()||(this.position.x+=t.x,this.position.y+=t.y),this},i.draw=function(t){const e=t.getContext();e.save(),0==this.status?e.strokeStyle="black":1==this.status?e.strokeStyle="orange":2==this.status&&(e.strokeStyle="blue"),this.drawNormal(t,e),e.restore()},i.drawNormal=function(t,e){const i=t.toScreenX(this.position.x),n=t.toScreenY(this.position.y);e.beginPath(),e.arc(i,n,this.radius,0,2*Math.PI,!0),e.fillStyle="white",e.stroke(),e.fill(),e.fillStyle="black",e.fillText(this.index.toString(),i-this.radius/2,n+this.radius/3),this.homogeneous&&e.fillText("w"+this.index+" = "+this.w.toString(),i-this.radius/2,n-this.radius-10)},e}(s.c),l=function(){function t(t){this._id=0,this.points=[],this.curve=new c,this.canvas=t||document.createElement("canvas"),this.tip=document.createElement("span"),this.tip.innerText=(new Date).toString(),this.tip.style.setProperty("display","none"),this.tip.style.setProperty("boxShadow ","0px 0px 2px 1px rgba(0,0,0,0.4)"),this.tip.style.setProperty("padding","0px 5px"),this.tip.style.setProperty("position","fixed"),document.body.appendChild(this.tip),document.addEventListener("mousemove",(t=>{t.toElement!=this.canvas?this.tip.style.setProperty("display","none"):(this.tip.style.setProperty("top",t.clientY+10+"px"),this.tip.style.setProperty("left",t.clientX+10+"px"))})),this.selectItem=null,this.highlightItem=null,this.mouseDown=!1,this.mouseStartX=0,this.mouseStartY=0,this.zoom=1,this.offsetX=0,this.offsetY=0,this.panStart=new n.F,this.panOffset=new n.F,this.width=this.canvas.width,this.height=this.canvas.height,this.snapConfig={radius:3},this.snappedPoint=new n.F,this.snapResult=!1,this.canvas.addEventListener("pointerdown",this.onPointerDown.bind(this)),this.canvas.addEventListener("pointerup",this.onPointerUp.bind(this)),this.canvas.addEventListener("pointermove",this.onPointerMove.bind(this)),this.canvas.addEventListener("wheel",this.onWheel.bind(this))}var e=t.prototype;return e.updateCurve=function(){this.needUpdate&&(this.curve.clear(),this.points.forEach((t=>{this.curve.addControlPoint(t)})),this.needUpdate=!1)},e.createPoint=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=1);let n=new a(t,e,i);return n.index=this.points.length,n.homogeneous=this.curve.rational,this.points.push(n),this.needUpdate=!0,n},e.initCurve=function(){this.createPoint(-150,10),this.createPoint(-80,100),this.createPoint(160,50),this.createPoint(200,10)},e.initCurveRational=function(){this.createPoint(-150,10),this.createPoint(-80,100,.5),this.createPoint(160,50,.2),this.createPoint(200,10)},e.resize=function(t,e){this.canvas.width=t,this.canvas.height=e,this.width=this.canvas.width,this.height=this.canvas.height,this.draw()},e.toWorldLength=function(t){return this.toWorldPosition(0,t).minus(this.toWorldPosition(0,0)).length()},e.snapPoint=function(t,e){void 0===e&&(e=new n.F);for(let n of this.points)if((!this.drag||n!=this.selectItem)&&n.isIntersect(t.x,t.y,this.toWorldLength(n.radius)))return e.copyFrom(n.position),!0;const i=this.toWorldLength(5),o=this.toWorldPosition(this.width,this.height),s=this.toWorldPosition(0,0);let r=this.getTickLength((s.y-o.y)/5)/5,h=Math.round(t.x/r),c=Math.round(t.y/r),a=new n.F(h*r,c*r);return!!a.isIntersect(t,i)&&(e.copyFrom(a),!0)},e.onPointerMove=function(t){const e=this.toWorldPosition(t.offsetX,t.offsetY);if(this.snapPoint(e,this.snappedPoint)?(this.snapResult=!0,e.copyFrom(this.snappedPoint),this.tip.innerText=e.x.toFixed(2)+", "+e.y.toFixed(2),this.tip.style.setProperty("display","inline")):(this.tip.style.setProperty("display","none"),this.snapResult=!1),this.drag){if(this.selectItem){const t=e.x,i=e.y,o=new n.F(t,i).minus(this._dragStart);o.length()>this.toWorldLength(10)&&(this.selectItem.position.copyFrom(this.pos),this.selectItem.move(o))}}else if(this.mouseDown){let e=new n.F(t.offsetX,t.offsetY).minus(this.panStart);this.offsetX=this.panOffset.x-e.x,this.offsetY=this.panOffset.y+e.y}else{this.highlightItem&&(this.highlightItem.status=this.selectItem==this.highlightItem?2:0,this.highlightItem=null);const e=this.toWorldX(t.offsetX),i=this.toWorldY(t.offsetY);for(let t of this.points)if(t.isIntersect(e,i,this.toWorldLength(t.radius))){this.highlightItem=t,this.highlightItem.status=1;break}}this.draw()},e.onPointerUp=function(t){this.drag=!1,this.mouseDown=!1,this.panStart=new n.F(t.offsetX,t.offsetY),this.panOffset=new n.F},e.onPointerDown=function(t){if(this.mouseDown=!0,this.mouseStartX=t.offsetX,this.mouseStartY=t.offsetY,this.panStart=new n.F(t.offsetX,t.offsetY),this.panOffset=new n.F(this.offsetX,this.offsetY),this.selectItem&&(this.selectItem.status=0,this.selectItem=null),this.highlightItem){const e=this.toWorldPosition(t.offsetX,t.offsetY);this.snapResult&&e.copyFrom(this.snappedPoint),this.selectItem=this.highlightItem,this.selectItem.status=2,this.drag=!0,this._dragStart=e,this.pos=this.selectItem.position.clone()}},e.onWheel=function(t){t.preventDefault();const e=this.getZoomScale(t.deltaY);t.deltaY>0?this.zoom*=e:t.deltaY<0&&(this.zoom/=e),this.draw()},e.getZoomScale=function(t){const e=Math.abs(.01*t);return Math.pow(.95,e)},e.toScreenX=function(t){const e=t*this.zoom-this.offsetX;return this.width/2+e},e.toScreenY=function(t){const e=t*this.zoom-this.offsetY;return this.height/2-e},e.toScreen=function(t,e){return new n.F(this.toScreenX(t),this.toScreenY(e))},e.toWorldPosition=function(t,e,i){return void 0===i&&(i=0),new n.F((t-this.width/2+this.offsetX)/this.zoom,(this.height/2+this.offsetY-e)/this.zoom,i)},e.toWorldX=function(t){return this.toWorldPosition(t,0).x},e.toWorldY=function(t){return this.toWorldPosition(0,t).y},e.getContext=function(){return this.canvas.getContext("2d")},e.draw=function(){this.updateCurve();const t=this.getContext();t.save(),t.clearRect(0,0,this.width,this.height),this.drawGrid(t),this.curve.draw(this),this.points.forEach((t=>t.draw(this))),t.strokeRect(0,0,this.width,this.height),t.restore()},e.getTickLength=function(t){let e=1;if(t>1){for(;t/10>1;)t/=10,e*=10;return t<2?1*e:t<5?2*e:5*e}},e.drawAxis=function(t,e,i){t.moveTo(this.toScreenX(i.x),this.toScreenY(i.y)),t.lineTo(this.toScreenX(e.x),this.toScreenY(e.y)),t.stroke()},e.drawLabel=function(t,e,i){t.fillText(i,this.toScreenX(e.x),this.toScreenY(e.y))},e.drawGrid=function(t){t.save();const e=this.toWorldPosition(this.width,this.height),i=this.toWorldPosition(0,0);let o=[],s=[0],r=[],h=[],c=20/this.zoom;c=this.getTickLength((i.y-e.y)/5),c<0&&(c=0);let a=c/5,l=Math.max(Math.abs(i.y),Math.abs(e.y)),u=l/a;for(let f=1;f<u;f++){if(f%5==0)continue;let t=a*f;t<i.y&&h.push(new n.F(i.x,t),new n.F(e.x,t)),-t>e.y&&h.push(new n.F(i.x,-t),new n.F(e.x,-t))}u=l/c;for(let f=1;f<u;f++){let t=c*f;t<i.y&&(s.push(t),o.push(new n.F(i.x,t),new n.F(e.x,t))),-t>e.y&&(s.push(-t),o.push(new n.F(i.x,-t),new n.F(e.x,-t)))}l=Math.max(Math.abs(i.x),Math.abs(e.x)),u=l/a;for(let f=1;f<u;f++){if(f%5==0)continue;let t=a*f;t<e.x&&h.push(new n.F(t,e.y),new n.F(t,i.y)),-t>i.x&&h.push(new n.F(-t,e.y),new n.F(-t,i.y))}u=l/a;for(let f=1;f<u;f++){let t=c*f;t<e.x&&(o.push(new n.F(t,e.y),new n.F(t,i.y)),r.push(t)),-t>i.x&&(o.push(new n.F(-t,e.y),new n.F(-t,i.y)),r.push(-t))}t.beginPath(),t.strokeStyle="rgb(232,232,232)";for(let n=0;n<h.length;n+=2)this.drawAxis(t,h[n],h[n+1]);t.stroke(),t.beginPath(),t.strokeStyle="rgb(192,192,192)";for(let n=0;n<o.length;n+=2)this.drawAxis(t,o[n],o[n+1]);t.stroke(),t.beginPath(),t.strokeStyle="red",this.drawAxis(t,new n.F(i.x,0),new n.F(e.x,0)),t.stroke(),t.beginPath(),t.strokeStyle="green",this.drawAxis(t,new n.F(0,e.y),new n.F(0,i.y)),t.stroke(),s.forEach((e=>this.drawLabel(t,new n.F(0,e),e))),r.forEach((e=>this.drawLabel(t,new n.F(e,0),e))),t.restore()},t}()},3402:function(t,e,i){i.d(e,{c:function(){return n}});let n=function(){this.status=0}},3144:function(t,e,i){function n(t){var e,i,n,o,s,r=t.substring(1).split("&"),h={};for(e=0;e<r.length;e++)-1===(i=r[e]).indexOf("=")?h[decodeURIComponent(i).trim()]=!0:(n=i.split("="),o=decodeURIComponent(n[0]).trim(),s=decodeURIComponent(n[1]).trim(),h[o]=s);return h}i.d(e,{m:function(){return n}})},17:function(t,e,i){i.d(e,{F:function(){return n}});let n=function(){function t(t,e){this.x=t||0,this.y=e||0}var e=t.prototype;return e.isIntersect=function(t,e){return void 0===e&&(e=1e-11),this.minus(t).squareLength()<e*e},e.add=function(e){return new t(this.x+e.x,this.y+e.y)},e.minus=function(e){return new t(this.x-e.x,this.y-e.y)},e.multiply=function(e){return new t(this.x*e.x,this.y*e.y)},e.multiplyScalar=function(e){return this.multiply(new t(e,e))},e.div=function(e){return new t(this.x/e.x,this.y/e.y)},e.divScalar=function(e){return this.div(new t(e,e))},e.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.squareLength=function(){return this.x*this.x+this.y*this.y},e.distanceTo=function(t){return this.minus(t).length()},e.copyFrom=function(t){return this.x=t.x,this.y=t.y,this},e.setZero=function(){return this.x=this.y=0,this},e.clone=function(){return new t(this.x,this.y)},e.isZero=function(){return 0==this.x&&0==this.y},t}()}}]);